<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta name="Generator" content="Kate, the KDE Advanced Text Editor" />
<title>led_on.asm</title>
</head>
<!-- Highlighting: "Asm6502" -->
<body>
<pre style='color:#8e44ad;background-color:#232629;'>
<span style='color:#7a7c7d;'>;name:            led_on.asm</span>
<span style='color:#7a7c7d;'>;assemble:        avra led_on.asm</span>
<span style='color:#7a7c7d;'>;flash:           avrdude -c arduino -p m328p -P /dev/ttyACM0 -b 115200 -U flash:w:led_on.hex</span>
<span style='color:#7a7c7d;'>;description:     It turns off the LED which is connected to PB5 (digital out 13).</span>
<span style='color:#7a7c7d;'>;inspir(at)ed by: http://www.rjhcoding.com/avr-asm-led-blink.php</span>
<span style='color:#7a7c7d;'>;nov 5, 2021 - agguro - no-license license</span>

<span style='color:#2980b9;'>.</span><span style='color:#2980b9;'>device</span><span style='color:#cfcfc2;'> ATmega328P</span>
<span style='color:#2980b9;'>.</span><span style='color:#2980b9;'>cseg</span>
<span style='color:#2980b9;'>.org</span><span style='color:#cfcfc2;'> </span><span style='color:#f67400;'>0</span><span style='color:#cfcfc2;'>x00</span>

start:
<span style='color:#cfcfc2;'>    </span><b><span style='color:#cfcfc2;'>ldi</span></b><span style='color:#cfcfc2;'>      r16</span><span style='color:#3f8058;'>,</span><span style='color:#f67400;'>0</span><span style='color:#cfcfc2;'>b00100000 </span><span style='color:#7a7c7d;'>;r16 = 0x20 PB5 as output</span>
<span style='color:#cfcfc2;'>    </span><b><span style='color:#cfcfc2;'>out</span></b><span style='color:#cfcfc2;'>      </span><span style='color:#f67400;'>0</span><span style='color:#cfcfc2;'>x04</span><span style='color:#3f8058;'>,</span><span style='color:#cfcfc2;'>r16       </span><span style='color:#7a7c7d;'>;r16 to DDRB (0x04) controls PORTB's in/out state.</span>
<span style='color:#cfcfc2;'>    </span><span style='color:#7a7c7d;'>;re-use r16 = 0x00100000 to set PB5 high (the famous pin 13 on Arduino Uno Rev3)</span>
<span style='color:#cfcfc2;'>    </span><b><span style='color:#cfcfc2;'>out</span></b><span style='color:#cfcfc2;'>      </span><span style='color:#f67400;'>0</span><span style='color:#cfcfc2;'>x05</span><span style='color:#3f8058;'>,</span><span style='color:#cfcfc2;'>r16       </span><span style='color:#7a7c7d;'>;set PORTB with values from r16, pin 13 = high</span>
loop:
<span style='color:#cfcfc2;'>    </span><b><span style='color:#cfcfc2;'>rjmp</span></b><span style='color:#cfcfc2;'>     loop</span>
</pre>
</body>
</html>
