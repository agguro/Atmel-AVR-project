
AVRA   Ver. 1.3.0 led_onoff.asm Fri Dec 10 16:42:03 2021


         ;name:            led_onoff.asm
         ;assemble:        avra led_onoff.asm
         ;flash:           avrdude -c arduino -p m328p -P /dev/ttyACM0 -b 115200 -U flash:w:led_onoff.hex
         ;description:     Turns the LED at PB5 (digital out 13) on and after a delay of 2 seconds off again.
         ;inspir(at)ed by: http://www.rjhcoding.com/avr-asm-led-blink.php
         ;nov 5, 2021 - agguro - no-license license
         
          .device ATmega328P
         
          .equ    DDRB = 0x04
          .equ    PORTB = 0x05
         
          .cseg
          .org 0x00
         
          start:
C:000000 e200          ldi     r16,0b00100000 ;r16 = 0x20 PB5 as output
C:000001 b904          out     DDRB,r16       ;r16 to DDRB (0x04) controls PORTB's in/out state.
             ;we can re-use the value 00100000 in r16 so
             ;turn led ON
C:000002 b905          out     PORTB,r16       ;set PORTB with values from r16, pin 13 = high    
C:000003 940e 0009     call    delay           ;wait 1 secs
             ;turn led OFF
C:000005 e000          ldi     r16,0b00000000  ;r16 = 0b00000000
C:000006 b905          out     PORTB,r16        ;set PORTB with values from r16, pin 13 = low
             
          loop:    
C:000007 940c 0007     jmp     loop
         
         ;Assembly code auto-generated by utility from Bret Mulvey
         ;Delay 31 999 991 cycles 1s 999ms 999us 437 1/2 ns at 16.0 MHz
         ;http://darcy.rsgc.on.ca/ACES/TEI4M/AVRdelay.html
          delay:
C:000009 e522          ldi     r18, 82
C:00000a e23b          ldi     r19, 43
C:00000b ef4e          ldi     r20, 254
          l1: 
C:00000c 954a          dec     r20
C:00000d f7f1          brne    l1
C:00000e 953a          dec     r19
C:00000f f7e1          brne    l1
C:000010 952a          dec     r18
C:000011 f7d1          brne    l1
C:000012 0000          nop
C:000013 9508          ret


Segment usage:
   Code      :        20 words (40 bytes)
   Data      :         0 bytes
   EEPROM    :         0 bytes

Assembly completed with no errors.
