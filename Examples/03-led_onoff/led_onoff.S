;name:        led_blink.S
;description: turn on and off the LED connected to PINB5 on PORTB.
;build:       the easiest way is make flash

#define    DDRB  0x04
#define    PORTB 0x05
#define    PINB5 5

.section .text
.global main

main:
    sbi      DDRB, PINB5       ;set pin 5 of DDRB register HIGH
       
    sbi      PORTB, PINB5      ;set pin 5 of PORTB HIGH
    
;Assembly code auto-generated by utility from Bret Mulvey
;Delay 31 999 991 cycles 1s 999ms 999us 437 1/2 ns at 16.0 MHz
;http://darcy.rsgc.on.ca/ACES/TEI4M/AVRdelay.html    
    ldi     r18, 82
    ldi     r19, 43
    ldi     r20, 254
l1: 
    dec     r20
    brne    l1
    dec     r19
    brne    l1
    dec     r18
    brne    l1
    
    cbi      PORTB, PINB5      ;set pin 5 of PORTB HIGH

loop:
    rjmp     loop

.end
